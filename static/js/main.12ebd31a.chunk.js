(this.webpackJsonpappencuesta=this.webpackJsonpappencuesta||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),o=a.n(l),c=(a(13),a(5)),s=a(1),i=a(2),m=a(4),u=a(3),d=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(t){t.preventDefault();var a=e.name.value,n=e.lastName.value,r=e.age.value,l=e.language.value;if(""==a||""==n||""==r||""==n||""==l)return alert("Complete todos los campos.");var o={name:a,lastName:n,age:parseInt(r),language:l},c=e.validarToken();e.registrarEncuesta(o,c)},e.validarToken=function(){var e=JSON.parse(localStorage.getItem("login"));return e&&e.login?e.token:""},e.registrarEncuesta=function(t,a){var n=e.props.urlAPi+"/api/v1/encuestas";console.log(t),fetch(n,{method:"POST",body:JSON.stringify(t),headers:new Headers({Authorization:"Bearer "+a,Accept:"application/json","Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){console.log(e),alert("Registro exitoso, gracias por participar.")}))},e.logout=function(){localStorage.removeItem("login"),window.location.href=""},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("p",{className:"text-right",onClick:function(){e.logout()}},"Cerrar Sesi\xf3n ",r.a.createElement("i",{className:"fas fa-arrow"})),r.a.createElement("div",{className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-md-8 col-xl-6"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title "},"Registrar Voto"),r.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Nombres"),r.a.createElement("input",{type:"text",className:"form-control",id:"name",placeholder:"Nombres",ref:function(t){return e.name=t}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"lastName"},"Apellidos"),r.a.createElement("input",{type:"text",className:"form-control",id:"lastName",placeholder:"Apellidos",ref:function(t){return e.lastName=t}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"age"},"Edad"),r.a.createElement("input",{type:"number",className:"form-control",id:"age",placeholder:"Edad",maxLength:"2",ref:function(t){return e.age=t}})),r.a.createElement("div",{className:"form-check mb-2 text-center"},r.a.createElement("input",{className:"form-check-input",type:"radio",id:"radioJava",name:"language",value:"Java",onClick:function(t){e.language.value="Java"}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"radioJava"},"Java")),r.a.createElement("div",{className:"form-check mb-4 text-center"},r.a.createElement("input",{className:"form-check-input",type:"radio",id:"radioC",name:"language",value:"C#",onClick:function(t){e.language.value="C#"}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"radioC"},"C#\xa0\xa0\xa0"),r.a.createElement("input",{type:"hidden",ref:function(t){return e.language=t}})),r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-danger btn-block"},"Votar")))))),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(n.Component),p=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault();var a=e.username.value,n=e.password.value;if(""==a||""==n)return alert("Complete todos los campos.");var r={username:a,password:n};e.login(r)},e.login=function(t){var a=e.props.urlAPi+"/api/v1/security/login";try{fetch(a,{method:"POST",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(t){console.log(t),"OK"==t.status?(localStorage.setItem("login",JSON.stringify({login:!0,token:t.accessToken})),e.setState({login:!0}),window.location.href=""):alert(t.body)}))}catch(n){alert("Error: Intente nuevamente")}},e.state={login:!1},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.login?r.a.createElement(d,null):r.a.createElement("div",{className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-md-8 col-xl-6"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title "},"Ingresar al Sistema"),r.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Usuario",ref:function(t){return e.username=t}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",ref:function(t){return e.password=t}})),r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-danger btn-block"},"Ingresar")))))),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(n.Component),f=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},this.props.id),r.a.createElement("td",null,this.props.nombre),r.a.createElement("td",null,this.props.apellidos),r.a.createElement("td",null,this.props.edad),r.a.createElement("td",null,this.props.lenguaje))}}]),a}(n.Component),h=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).validarToken=function(){var e=JSON.parse(localStorage.getItem("login"));return e&&e.login?e.token:""},n.logout=function(){localStorage.removeItem("login"),window.location.href=""},n.state={encuestas:[]},n}return Object(i.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=this.props.urlAPi+"/api/v1/encuestas",a=this.validarToken();fetch(t,{headers:new Headers({Authorization:"Bearer "+a})}).then((function(e){return e.json()})).then((function(t){e.setState({encuestas:t})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("p",{className:"text-right",onClick:function(){e.logout()}},"Cerrar Sesi\xf3n ",r.a.createElement("i",{className:"fas fa-arrow"})),r.a.createElement("div",{className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title "},"Resultados"),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Nombres"),r.a.createElement("th",{scope:"col"},"Apellidos"),r.a.createElement("th",{scope:"col"},"Edad"),r.a.createElement("th",{scope:"col"},"Elecci\xf3n"))),r.a.createElement("tbody",null,this.state.encuestas.map((function(e,t){return r.a.createElement(f,{key:e.id,id:e.id,nombre:e.name,apellidos:e.lastName,edad:e.age,lenguaje:e.language})})))))))))}}]),a}(n.Component),g="http://balanceador-cf-trabajo-final-1394212781.us-east-1.elb.amazonaws.com";function v(){var e=JSON.parse(localStorage.getItem("login"));return e&&e.login?e.token:""}var E=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(null),s=Object(c.a)(o,2),i=s[0],m=s[1];return Object(n.useEffect)((function(){if(""!=v()){var e=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(a)}(v());return l(!0),void m(e["cognito:groups"][0])}l(!1)}),[]),r.a.createElement("div",{className:"app container"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",{className:"text-center mb-3 text-info"},"Sistema de Encuesta ",i),a?r.a.createElement("div",null,"ADMIN"==i?r.a.createElement(h,{urlAPi:g}):r.a.createElement(d,{urlAPi:g})):r.a.createElement(p,{urlAPi:g})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,a){e.exports=a(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.12ebd31a.chunk.js.map